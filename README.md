# MCP Replicate Server

Этот пакет содержит MCP сервер для взаимодействия с API Replicate и ElevenLabs.

## Установка и запуск

Этот проект использует **системный Python 3** для запуска.

**ВАЖНО:** Убедитесь, что у вас установлен Python 3.11 (например, через Homebrew: `brew install python@3.11`) и команда `python3.11` доступна в вашем PATH (проверить можно командой `which python3.11`). Если нет, используйте полный путь или добавьте директорию Python в PATH.

1.  **Клонируйте/скопируйте репозиторий** на ваш компьютер.

2.  **Создайте файл `.env`**:
    Скопируйте `.env.example` (если он есть) или создайте `.env` вручную:
    ```bash
    # Если есть .env.example:
    cp .env.example .env 
    # Или создайте пустой:
    touch .env
    ```
    Откройте файл `.env` и добавьте ваши API ключи:
    ```dotenv
    REPLICATE_API_TOKEN=ВАШ_КЛЮЧ_REPLICATE
    ELEVENLABS_API_KEY=ВАШ_КЛЮЧ_ELEVENLABS
    ```

3.  **Установите зависимости (один раз или при обновлении)**:
    Откройте терминал в папке проекта и выполните команду, чтобы установить необходимые пакеты **глобально** для вашего системного Python:
    ```bash
    python3.11 -m pip install -r requirements.txt --upgrade
    ```
    *(Если у вас есть отдельная команда `pip3.11`, вы можете использовать её: `pip3.11 install -r requirements.txt --upgrade`)*

4.  **Запустите сервер вручную**:
    В терминале, находясь в папке проекта, выполните:
    ```bash
    python3.11 replicate_mcp_server.py
    ```
    Сервер будет запущен в терминале и готов принимать MCP запросы. Чтобы остановить его, нажмите `Ctrl+C` в этом терминале.

    **Для использования с Cursor MCP:** Убедитесь, что в файле `~/.cursor/mcp.json` для сервера `replicate_generator` указана команда `python3.11`, правильные аргументы (`/Users/aliya/mcp_content_creation/replicate_mcp_server.py`), а также рабочая директория (`/Users/aliya/mcp_content_creation/`). Затем перезапустите сервер через интерфейс Cursor.

## Тестирование с MCP Inspector (Опционально)

Если вы хотите протестировать сервер с помощью MCP Inspector, выполните в терминале (в той же папке проекта):

```bash
# Используем тот же системный Python, которым запускается сервер
npx @modelcontextprotocol/inspector python3.11 replicate_mcp_server.py 
```
Эта команда запустит инспектор, который в свою очередь запустит ваш сервер.

*Примечание: Иногда перед запуском инспектора может потребоваться освободить порты, которые он использует (например, 6277 и 6274). Это можно сделать с помощью команд `lsof -ti:<порт>` для поиска процесса и `kill <PID>` для его завершения.*


## Примечание для пользователей не macOS

Скрипт `replicate_mcp_server.py` использует команду `open` для автоматического открытия сгенерированных файлов. Эта команда работает только на macOS.

Если вы запускаете сервер на Windows или Linux, открытие файлов не будет работать и может вызвать ошибку. Вы можете:

*   Игнорировать сообщения об ошибках, связанные с командой `open`.
*   Отредактировать файл `replicate_mcp_server.py` и заменить вызовы `subprocess.run([\"open\", ...])` на эквивалентную команду для вашей ОС (`start` для Windows, `xdg-open` для Linux) или просто закомментировать/удалить эти строки, если автоматическое открытие не требуется. 